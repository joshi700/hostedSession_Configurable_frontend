{"ast":null,"code":"var _s = $RefreshSig$();\n// ApiLogManager.js\n// Centralized API logging utility\n\nimport { useState, useEffect } from 'react'; // ← MOVED TO TOP\n\nclass ApiLogManager {\n  constructor() {\n    this.logs = [];\n    this.maxLogs = 50; // Keep last 50 logs\n  }\n\n  /**\r\n   * Add a new API log entry\r\n   * @param {Object} logEntry - The log entry to add\r\n   */\n  addLog(logEntry) {\n    const timestamp = new Date().toISOString();\n    const enhancedLog = {\n      ...logEntry,\n      timestamp,\n      id: `${timestamp}-${Math.random().toString(36).substr(2, 9)}`\n    };\n    this.logs.push(enhancedLog);\n\n    // Keep only the last maxLogs entries\n    if (this.logs.length > this.maxLogs) {\n      this.logs = this.logs.slice(-this.maxLogs);\n    }\n\n    // Save to session storage\n    this.saveLogs();\n    console.log('[API Log]', enhancedLog);\n    return enhancedLog;\n  }\n\n  /**\r\n   * Get all logs\r\n   */\n  getAllLogs() {\n    return [...this.logs];\n  }\n\n  /**\r\n   * Get logs for a specific order\r\n   * @param {string} orderId - The order ID to filter by\r\n   */\n  getLogsByOrderId(orderId) {\n    return this.logs.filter(log => {\n      var _log$request, _log$request$body, _log$request2, _log$request2$url;\n      return ((_log$request = log.request) === null || _log$request === void 0 ? void 0 : (_log$request$body = _log$request.body) === null || _log$request$body === void 0 ? void 0 : _log$request$body.orderId) === orderId || ((_log$request2 = log.request) === null || _log$request2 === void 0 ? void 0 : (_log$request2$url = _log$request2.url) === null || _log$request2$url === void 0 ? void 0 : _log$request2$url.includes(orderId));\n    });\n  }\n\n  /**\r\n   * Clear all logs\r\n   */\n  clearLogs() {\n    this.logs = [];\n    this.saveLogs();\n  }\n\n  /**\r\n   * Save logs to session storage\r\n   */\n  saveLogs() {\n    try {\n      sessionStorage.setItem('apiLogs', JSON.stringify(this.logs));\n    } catch (error) {\n      console.error('Error saving logs to session storage:', error);\n    }\n  }\n\n  /**\r\n   * Load logs from session storage\r\n   */\n  loadLogs() {\n    try {\n      const stored = sessionStorage.getItem('apiLogs');\n      if (stored) {\n        this.logs = JSON.parse(stored);\n      }\n    } catch (error) {\n      console.error('Error loading logs from session storage:', error);\n      this.logs = [];\n    }\n  }\n\n  /**\r\n   * Export logs as JSON file\r\n   */\n  exportLogs() {\n    const dataStr = JSON.stringify(this.logs, null, 2);\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n    const exportFileDefaultName = `api-logs-${new Date().toISOString()}.json`;\n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  }\n\n  /**\r\n   * Get log statistics\r\n   */\n  getStats() {\n    const total = this.logs.length;\n    const successful = this.logs.filter(log => !log.error).length;\n    const failed = this.logs.filter(log => log.error).length;\n    const endpoints = {};\n    this.logs.forEach(log => {\n      const endpoint = log.endpoint || 'unknown';\n      endpoints[endpoint] = (endpoints[endpoint] || 0) + 1;\n    });\n    return {\n      total,\n      successful,\n      failed,\n      endpoints\n    };\n  }\n}\n\n// Create a singleton instance\nconst apiLogManager = new ApiLogManager();\n\n// Load existing logs on initialization\napiLogManager.loadLogs();\nexport default apiLogManager;\n\n// React Hook for using the logger in components\nexport const useApiLogger = () => {\n  _s();\n  const [logs, setLogs] = useState([]);\n  useEffect(() => {\n    // Load logs on mount\n    const currentLogs = apiLogManager.getAllLogs();\n    setLogs(currentLogs);\n  }, []);\n  const addLog = logEntry => {\n    const newLog = apiLogManager.addLog(logEntry);\n    setLogs(apiLogManager.getAllLogs());\n    return newLog;\n  };\n  const clearLogs = () => {\n    apiLogManager.clearLogs();\n    setLogs([]);\n  };\n  const exportLogs = () => {\n    apiLogManager.exportLogs();\n  };\n  const getStats = () => {\n    return apiLogManager.getStats();\n  };\n  return {\n    logs,\n    addLog,\n    clearLogs,\n    exportLogs,\n    getStats\n  };\n};\n_s(useApiLogger, \"6h9FKNtuyCQaVwwdLqmS9omOzEQ=\");","map":{"version":3,"names":["useState","useEffect","ApiLogManager","constructor","logs","maxLogs","addLog","logEntry","timestamp","Date","toISOString","enhancedLog","id","Math","random","toString","substr","push","length","slice","saveLogs","console","log","getAllLogs","getLogsByOrderId","orderId","filter","_log$request","_log$request$body","_log$request2","_log$request2$url","request","body","url","includes","clearLogs","sessionStorage","setItem","JSON","stringify","error","loadLogs","stored","getItem","parse","exportLogs","dataStr","dataUri","encodeURIComponent","exportFileDefaultName","linkElement","document","createElement","setAttribute","click","getStats","total","successful","failed","endpoints","forEach","endpoint","apiLogManager","useApiLogger","_s","setLogs","currentLogs","newLog"],"sources":["C:/Users/gaura/Downloads/FINAL-hosted-session-with-3DS/final-integrated-version/frontend/src/utils/ApiLogManager.js"],"sourcesContent":["// ApiLogManager.js\r\n// Centralized API logging utility\r\n\r\nimport { useState, useEffect } from 'react'; // ← MOVED TO TOP\r\n\r\nclass ApiLogManager {\r\n  constructor() {\r\n    this.logs = [];\r\n    this.maxLogs = 50; // Keep last 50 logs\r\n  }\r\n\r\n  /**\r\n   * Add a new API log entry\r\n   * @param {Object} logEntry - The log entry to add\r\n   */\r\n  addLog(logEntry) {\r\n    const timestamp = new Date().toISOString();\r\n    const enhancedLog = {\r\n      ...logEntry,\r\n      timestamp,\r\n      id: `${timestamp}-${Math.random().toString(36).substr(2, 9)}`\r\n    };\r\n\r\n    this.logs.push(enhancedLog);\r\n\r\n    // Keep only the last maxLogs entries\r\n    if (this.logs.length > this.maxLogs) {\r\n      this.logs = this.logs.slice(-this.maxLogs);\r\n    }\r\n\r\n    // Save to session storage\r\n    this.saveLogs();\r\n\r\n    console.log('[API Log]', enhancedLog);\r\n    return enhancedLog;\r\n  }\r\n\r\n  /**\r\n   * Get all logs\r\n   */\r\n  getAllLogs() {\r\n    return [...this.logs];\r\n  }\r\n\r\n  /**\r\n   * Get logs for a specific order\r\n   * @param {string} orderId - The order ID to filter by\r\n   */\r\n  getLogsByOrderId(orderId) {\r\n    return this.logs.filter(log => \r\n      log.request?.body?.orderId === orderId ||\r\n      log.request?.url?.includes(orderId)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Clear all logs\r\n   */\r\n  clearLogs() {\r\n    this.logs = [];\r\n    this.saveLogs();\r\n  }\r\n\r\n  /**\r\n   * Save logs to session storage\r\n   */\r\n  saveLogs() {\r\n    try {\r\n      sessionStorage.setItem('apiLogs', JSON.stringify(this.logs));\r\n    } catch (error) {\r\n      console.error('Error saving logs to session storage:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load logs from session storage\r\n   */\r\n  loadLogs() {\r\n    try {\r\n      const stored = sessionStorage.getItem('apiLogs');\r\n      if (stored) {\r\n        this.logs = JSON.parse(stored);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading logs from session storage:', error);\r\n      this.logs = [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Export logs as JSON file\r\n   */\r\n  exportLogs() {\r\n    const dataStr = JSON.stringify(this.logs, null, 2);\r\n    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\r\n    \r\n    const exportFileDefaultName = `api-logs-${new Date().toISOString()}.json`;\r\n    \r\n    const linkElement = document.createElement('a');\r\n    linkElement.setAttribute('href', dataUri);\r\n    linkElement.setAttribute('download', exportFileDefaultName);\r\n    linkElement.click();\r\n  }\r\n\r\n  /**\r\n   * Get log statistics\r\n   */\r\n  getStats() {\r\n    const total = this.logs.length;\r\n    const successful = this.logs.filter(log => !log.error).length;\r\n    const failed = this.logs.filter(log => log.error).length;\r\n    \r\n    const endpoints = {};\r\n    this.logs.forEach(log => {\r\n      const endpoint = log.endpoint || 'unknown';\r\n      endpoints[endpoint] = (endpoints[endpoint] || 0) + 1;\r\n    });\r\n\r\n    return {\r\n      total,\r\n      successful,\r\n      failed,\r\n      endpoints\r\n    };\r\n  }\r\n}\r\n\r\n// Create a singleton instance\r\nconst apiLogManager = new ApiLogManager();\r\n\r\n// Load existing logs on initialization\r\napiLogManager.loadLogs();\r\n\r\nexport default apiLogManager;\r\n\r\n\r\n// React Hook for using the logger in components\r\nexport const useApiLogger = () => {\r\n  const [logs, setLogs] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Load logs on mount\r\n    const currentLogs = apiLogManager.getAllLogs();\r\n    setLogs(currentLogs);\r\n  }, []);\r\n\r\n  const addLog = (logEntry) => {\r\n    const newLog = apiLogManager.addLog(logEntry);\r\n    setLogs(apiLogManager.getAllLogs());\r\n    return newLog;\r\n  };\r\n\r\n  const clearLogs = () => {\r\n    apiLogManager.clearLogs();\r\n    setLogs([]);\r\n  };\r\n\r\n  const exportLogs = () => {\r\n    apiLogManager.exportLogs();\r\n  };\r\n\r\n  const getStats = () => {\r\n    return apiLogManager.getStats();\r\n  };\r\n\r\n  return {\r\n    logs,\r\n    addLog,\r\n    clearLogs,\r\n    exportLogs,\r\n    getStats\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}